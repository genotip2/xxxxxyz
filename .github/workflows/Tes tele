name: Test Telegram Bot

on:
  workflow_dispatch:  # Menjalankan secara manual

jobs:
  test-bot:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Requests Library
        run: pip install requests

      - name: Send Test Message to Telegram
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: "[MASUKKAN_CHAT_ID_ANDA]"
        run: |
          python <<EOF
          import os
          import requests

          TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
          CHAT_ID = os.getenv('TELEGRAM_CHAT_ID')
          MESSAGE = "âœ… Bot Telegram berhasil diuji di GitHub Actions!"

          url = f"https://api.telegram.org/bot{TOKEN}/sendMessage"
          data = {"chat_id": CHAT_ID, "text": MESSAGE}

          response = requests.post(url, data=data)
          print(response.json())
          EOF
